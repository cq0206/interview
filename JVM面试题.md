# JVM面试题

## 字节码相关

* 知道字节码吗?字节码都有哪些?

## JMM内存模型

* 说说JVM的主要组成部分以及作用?
* jvm内存模型，内存屏障
* 对象一定分配在堆上？对象不一定分配在堆上，JIT可以实现栈上分配
* java线程模型和jvm线程模型区分
* Java堆的内存结构？ 在什么地方会发生OOM？ 如何分析OOM发生的原因？ 让你自己实现OOM，你会怎么做？
* 什么东西分配在堆上和栈上？
* 一个对象从创建到销毁都是怎么在这些部分里存活和转移的？
* JVM 运行时区域 常见的堆内存溢出情况
* 栈溢出的情形（递归，调节-Xss）

## 类加载器

* 什么是双亲委派模型？
* 类加载器的本质
* 类加载器为什么有三层结构
* 怎么自定义类加载器做容器隔离？
* 讲讲类加载机制呗?都有哪些类加载器,这些类加载器都加载哪些文件?
* 手写一下类加载Demo 
* Classloader作用
* 讲一讲类加载器工作机制？你知道强引用、弱引用和软引用吗?为什么要有这些东西？他们有什么作用？你在项目中用过吗？
* 说一下java类加载器的工作机制？类加载在那个区域进行的？
* 你自己定义的类能被最顶级的类加载器加载吗？为什么？ 自定义的类会被什么类加载器加载？ 如何加载一个不在根目录下的类？
* 什么是双亲委派模型？为什么Java的类加载器要使用双亲委派模型？ 15、如何自定义自己的类加载器，自己的类加载器和Java自带的类加载器关系如何处理？
* 什么是tomcat/jboss类加载机制？
* 类加载机制，一个类加载到虚拟机中一共有几个步骤，这些步骤的顺序哪些是固定的，哪些是不固定的，为什么不固定？
* 说一下双亲委派模型？如何破坏双亲委派模型？知道Tomcat中是如何违背双亲委派模型的吗？
* Java为什么要设计双亲委派模型？ •什么时候需要自定义类加载器？ 



## GC垃圾回收

* 简单阐述下垃圾回收机制
* 堆的原理和分代了解吗
* GC方式有哪些？它们的原理是什么？
* CMS和G1各自使用的算法以及优缺点
* 内存分配策略（如何在Eden和老年代中分配）、回收策略（Minor GC、Full GC）
* 谈谈你对上面GC中回收对象中提出的对象有什么理解？回收那些对象，需要怎么分辨？
* 你了解的垃圾收集算法有哪些？
* 你了解那些垃圾收集器？
* 线上发送频繁fullgc如何处理?
* 新生代，老年代说下？
* 一般新生代逃过几次gc()会被划分到老年代？
* survivor区作用
* jvm中一次完整的GC流程（从ygc到fgc）是怎样的，重点讲讲对象如何晋升到老年代，几种主要的jvm参数等 
* 你知道哪几种垃圾收集器，各自的优缺点，重点讲下CMS 
* 新生代垃圾收集是否会停顿 ,cms是否会停顿，在什么时候停顿
* 讲讲 GC，清除，整理，交换（survivor 区域），CMS 执行的过程
* 什么情况会导致内存泄露，内存溢出，你怎么解决的。
* gc怎么回收对象的，用了什么算法 说一下分治算法思想
* JVM垃圾回收机制，何时触发MinorGC等
* 新生代和老生代的内存回收策略 ,Eden和Survivor的比例分配等
* Java 8的内存分代改进
* GC的可达性分析中那些算是GC roots
* 简述java内存分配与回收策略以及Minor GC和Major GC?
* 内存溢出一般发生在哪个区？永久代会不会导致内存溢出？
* 栈溢出一般抛出什么异常？jvm设置栈的大小，参数？
* 说说GC的过程 强制young gc会有什么问题？ 知道G1么？ 回收过程是怎么样的？
* CMS GC有什么问题？ 怎么避免产生浮动垃圾？
* 如果web服务器突然出现频率很高的FullGC，可能是什么原因?你会怎么去排查呢？
* “只对堆进行gc ”这句话对不对？调用system.gc()马上就执行gc吗？
* GC的机制是什么？垃圾回收器的基本原理是还说呢么？是否可以立即回收内存？怎么样主动的通知JVM进行垃圾回收？
* 频繁老年代回收怎么分析和解决？
* 什么时候一个对象会被GC？ 接着问为什么要在这种时候对象才会被GC？ GC策略都有哪些分类？这些策略分别都有什么优劣势？都适用于什么场景？ 举个实际的场景，让选择一个GC策略？然后问什么要选择这个策略？
* 内存的哪些部分会参与GC的回收？ 
* 线程池中的线程为什么不会被GC回收
* JVM 简述 G1，可预测停顿时间，是怎么做到的？ 
* CMS和G1的区别，讲一讲CMS垃圾收集的步骤，哪些步骤是并发哪些是并行。知道哪些垃圾收集算法
* 触发Full GC 的场景有哪些？ 说说G1垃圾回收器？老年代，年轻代如何分配？
* 垃圾回收基本原理、几种常见的垃圾回收器的特性、重点了解CMS（或G1）以及一些重要的参数 内存区域：能说清jvm的内存划分 常见问题 CMS GC回收分为哪几个阶段？分别做了什么事情？ CMS有哪些重要参数？ Concurrent Model Failure和ParNew promotion failed什么情况下会发生？ CMS的优缺点？ 有做过哪些GC调优？ 为什么要划分成年轻代和老年代？ 年轻代为什么被划分成eden、survivor区域？ 年轻代为什么采用的是复制算法？ 老年代为什么采用的是标记清除、标记整理算法 什么情况下使用堆外内存？要注意些什么？ 堆外内存如何被回收？
* g1收集器用的具体算法？ 遇到过什么线上问题？线程池用法不对，频繁full GC怎么处理的？回答内存dump，定位问题
* GC的常见算法，CMS以及G1的垃圾回收过程，CMS的各个阶段哪两个是Stop the world的，CMS会不会产生碎片，G1的优势
* 标记清除和标记整理算法的理解以及优缺点。
* eden survivor区的比例，为什么是这个比例，eden survivor的工作过程。
* JVM如何判断一个对象是否该被GC，可以视为root的都有哪几种类型。
* 强软弱虚引用的区别以及GC对他们执行怎样的操作
* Java是否可以GC直接内存
* JVM 内存分配策略 FullGC 的触发条件有哪些 
* 虚拟机栈默认设置的大小
* CMS有哪些重要参数？ Concurrent Model Failure和ParNew promotion failed什么情况下会发生？
* 一个对象从新生代到老年代的过程你可以说一下吗？ 那你知道它经过几轮回收到达老年代吗？也就是它的年龄。 新生代三个区域比例是多少

## JVM调优

* 请问你做过哪些JVM优化?使用什么方法?达到什么效果?
* 当出现了内存溢出，你怎么排错?
* 用过哪些命令查看JVM的状态、堆栈信息？
* jvm内存调优用过哪些工具，jstat做什么用的？如何dump出当前线程状态？
* 应用服务器的jvm调优实际经验，如何做的，在哪里用到的 
* 对象比较大，生命周期短，GC参数怎么调优
* 平时遇到内存溢出的情形，处理 答：-Xms和-Xmx,-XX:+HeapDumpOnOutMemoryError，让虚拟机在出现内存溢出异常时Dump出当前的内存堆转储快照以便事后分析。
* 如果一个固定的堆内存，当创建线程数很多的时候，你JVM参数怎么配置。
* gc,cpu过高如何定位问题；
* 频繁老年代回收怎么分析和解决？
* top和jstack命令用过没，jstack命令的nid是什么意思，怎么查看java某个进程的线程



